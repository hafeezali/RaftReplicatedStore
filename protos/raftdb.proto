syntax = "proto3";

service Client {
	rpc Get (GetRequest) returns (GetResponse) {}
	rpc Put (PutRequest) returns (PutResponse) {}
}

service Raft {
	rpc AppendEntries (LogEntry) returns (LogEntryResponse) {}
	rpc RequestVote (VoteRequest) returns (VoteResponse) {}
}

message GetRequest {
	int32 key = 1;
}

message PutRequest {
	int32 key = 1;
	int32 value = 2;
}

message GetResponse {
	int32 code = 1;
	int32 value = 2;
}

message PutResponse {
	int32 code = 1;
}

message LogEntry {

	message Entry {
		int32 key = 1;
		int32 value = 2;
	}

	int32 term = 1;
	int32 logIndex = 2;
	int32 prev_term = 3;
	int32 prev_log_index = 4;
	int32 lastCommitIndex = 5;
	Entry entry = 6;
}

message LogEntryResponse {
	int32 code = 1;
	int32 term = 2;
}

message VoteRequest {
	int32 term = 1;
	int32 logIndex = 2;
}

message VoteResponse {
	bool success = 1;
	int32 term = 2;
	int32 logIndex = 3;
}